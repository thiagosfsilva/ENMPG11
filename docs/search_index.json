[
["index.html", "ENMPG11 Geomatics - Module Workbook Welcome!", " ENMPG11 Geomatics - Module Workbook Thiago Silva 2020-02-03 Welcome! Welcome to the ENMPG11 Geomatics module workbook! This module provides an introduction to the basic concepts and principles of Geomatics, i.e. how to use Geographic Information Systems (GIS) and Earth Observation (EO) to perform spatial data analysis and visualisation. As Geomatics is best taught through hands-on practice, this module is based on the flipped classroom method, where you will be assigned videos and/or readings on a weekly basis, and then we will meet twice a week for computer-based practicals. In each practical class you will be taken through a number of exercises that will teach you fundamental skills in GIS and EO. Use the items on the left to navigate through the sections of the workbook, and click on the arrows at the left and right edges of the main page are to page forward/backward. If you are viewing the book on a small screen, the navigation buttons will be on the bottom instead. "],
["outline.html", "1 Module Outline and General Info 1.1 Staff and Communication: 1.2 About the Module 1.3 Intended Learning Outcomes (ILO’s): 1.4 Readings and Resources 1.5 Attendance and Points of Contact 1.6 Class Schedule and Structure 1.7 Assessment and Grading 1.8 Module Timetable and Dates 1.9 Other Relevant Information", " 1 Module Outline and General Info 1.1 Staff and Communication: Module Coordinator: Thiago Silva C.3B144E thiago.sf.silva@stir.ac.uk Tutor/demonstrator: Jazz Rhoades Please follow the guidelines below for module-related communication: When trying to answer a question, follow this order: Software help files &gt; Internet Search &gt; Ask your colleagues &gt; Ask me. One of the best things you can get out of this module is learning how to become an independent Geomatics user. Once you graduate, you will be on your own and expected to be proficient in these tools! Any questions or comments regarding module content and assessments should be posted on the Discussion page on CANVAS, so that answers are visible to everyone. Questions of this nature sent via e-mail will not be replied to. Requests for extension on assignments should be submitted directly through CANVAS without the need to send a prior e-mail to the module coordinator. Questions regarding personal and/or sensitive issues related to the module should be sent directly by e-mail to the module coordinator. Please add the keyword ENMPG11 to your e-mail subject. 1.2 About the Module Geomatics is defined in the ISO/TC 211 standards as the “discipline concerned with the collection, distribution, storage, analysis, processing, presentation of geographic data or geographic information”.It is an integrative discipline encompassing Geographic Information Systems (GIS), Earth Observation (EO, a.k.a Remote Sensing), and satial surveying methods. These technologies have become vitally important tools in ecological and environmental management and are being increasingly used by scientists, governmental agencies and NGOs for the assessment, monitoring and management of global resources. This course will provide an introduction to the basic concepts and principles of GIS and EO, and how they are now widely used to support ecological and environmental management objectives. You will be introduced to modern methods for manipulating and analysing geospatial data of various sources and formats. Hands-onpractical sessions will examine various real-world applications of GIS and EO in environmental management. As the name implies, Geo-matics can be tought as “informatics for geographic data”. This is a computer intensive module that will require you to be comfortable using complex computer software and knowlegeable in managing files and folders. Also, as with any complex piece software, stuff will often not work at first. This is regardless of software source, version, vendor of platform. Learning how to independently troubleshoot when things don’t work as they should is a MAJOR part of being proficient in Geomatics, so be prepared for it! 1.3 Intended Learning Outcomes (ILO’s): By the end of this module, you should be able to: Select and apply appropriate GIS/EO functions based on spatial theory; Describe the physical principles underlying remote sensing in the optical and microwave domains and the respective uses of the data provided by these sensors; Critically differentiate sources and structures of geospatial datasets; Analyse and visualise geospatial data using open source software and programming languages. 1.4 Readings and Resources If you have any questions about how QGIS works, your first stop should be the QGIS documentation: (https://docs.qgis.org/3.4/en/docs/index.html) There are no prescribed textbooks, but some readings are suggested below. Students are expected to read widely from the peer-reviewed literature to consolidate their understanding of course materials. Textbooks: Heywood D.I., Cornelius S., &amp; Carver S. 2006. An Introduction to Geographical Information Systems. 2nd Edition. Harlow: Prentice Hall. Longley, P.A., Goodchild, M.F., Maguire D.J., &amp; Rhind DW. 2005. Geographical Information Systems and Science. 2nd Edition. Hoboken: Wiley. Lillesand, T. M., Kiefer, R. W., &amp; Chipman, J. W. 2015. Remote sensing and image interpretation. 7th Edition. Hoboken: John Wiley &amp; Sons. Campbell, J.B., &amp; Wynne R.H. 2011. Introduction to Remote Sensing. 5th Edition. New Yorlk: Gilford Press. Wegmann, M., Leutner, B., &amp; Dech, S. 2016. Remote sensing and GIS for ecologists : using open source software. Exeter: Pelagic Publishing. Key journals: International Journal of Geographical Information Science (IJGIS) GeoInformatica Cartography and Geographic Information Science Journal of Geographical Systems Journal of Spatial Information Science (JOSIS) International Journal of Applied Earth Observation and Geoinformation GIScience and Remote Sensing Computers and Geosciences Remote Sensing of Environment Remote Sensing IEEE Transactions on Geoscience and Remote Sensing IEEE Journal of Selected Topics in Applied Earth Observations and Remote Sensing Remote Sensing in Ecology and Conservation In addition, we will make use of the Linkedin Learning online instructional platform, which University of Stirling subscribes to. To access it, go to the University Portal and click on this link, at the left of the page: There are also apps available for Android and iOS. To log in, select “Login through your institution” after installing. In particular, we will make use of some of the recorded lectures of the “Learning QGIS” course by Gordon Luckett Link to QGIS course on Linkeding Learning Be aware that there is an older version of this course on the LL platform called “Learning QGIS 2015”, which is based on QGIS version 2. We will use QGIS 3 on this course. Another very good video resource are the QGIS videos by Klas Karlsson on YouTube. They are usually very long and in-depth, but even after using QGIS for almost 10 years I still learn a thing or two every time I watch them: Klas Karlsson QGIS Videos on YouTube 1.5 Attendance and Points of Contact Student attendance and engagement will be recorded by monitoring attendance or participation at designated Points of Contact. Our PoCs for this module are: 2019-01-20: our first face to face meeting 2020-03-05: main practical for the remote sensing component of the module 2020-03-30: the third help session for the final project; by then you must have made some headway into your project if you have any expectations of completing it in time. 1.6 Class Schedule and Structure We will meet twice a week for practical sessions at the following times and locations: Monday 10:00h - 13:00h - Cottrell 3A146 Thursday 10:00h - 13:00h - Cottrell 3A146 Most practical sessions will be structured as follows: 10:00-11:00: Discussion of recorded material with follow-along hands-on demonstrations of the tools and concepts by main instructor; 11:00-12:00: Hands-on exercises following guidance provided by the module workbook, with instructor/tutor support available; 12:00-13:00: Independent work on an invidiual problem assignment (formative or summative), with tutor support available. 1.7 Assessment and Grading This module is assessed by coursework only. Coursework should be submitted in electronic format through CANVAS as responses to Quizzes or as a PDF. Assessment feedback will be given online via CANVAS, and standard penalties for late submission will apply. If you require an extension for any assessed work, please submit an extension request through CANVAS before the due date for the assignment. Follow this link for information on Assessment and Award of Credit by Ubniversity of Stirling Use this link for the Extenuating Circumstances form The final grade for this module will be based on a set of near-weekly summative hands-on problems, and on a final open-themed individual project: 1) Hands-on problems (50% of final grade) At the end of every practical session, you will be assigned either a formative or summative hands-on problem to be worked on individually. The last hour of each practical session will be dedicated to work on these problems under tutor support, but they can be at any time before the due date. These assignments will assess ILOs 1, 3, and 4. The average of all summative problem grades will compose 50% of your final grade. Each summative assignment must be completed before the release date of the next summative assignment. Formative assignments can be completed at any time. 2) Final individual project (50% of the final grade) You will be required to complete an individual piece of project work, following the guidelines provided here. The deliverable for this project will be a document to be formatted as a if it were a journal article to be submitted to a geomatics journal (no actual journal submission in necessary). Starting at week 11, all of your class time will be reserved for you to work on your project, with support from the instructor and tutor. The project is due at the last day of teaching for the semester. The project assesses ILO’s 1-4. The grade for the project will compose 50% of your final grade. This assessment is compulsory (i.e. failure to submit these compulsory pieces of work will result in an X grade). 1.8 Module Timetable and Dates Table 1.1: ENMPG Timetable - Spring2020 Week Unit Activity type Topic Date 1 Introduction to Geomatics Recorded Lectures Introduction to Geomatics Monday Lab No class 2020-01-13 Thursday Lab Self teaching from Linkedin (home assignment) 2020-01-16 2 Spatial data types Recorded Lectures Spatial Data Types: vectors and rasters Monday Lab Project management and data handling in QGIS 2020-01-20 Thursday Lab Working with vector data - attribute tables (Summative Assessment 1) 2020-01-23 3 Spatial Operations I - Vector data Recorded lectures Spatial Data Types: vectors and rasters Monday Lab Spatial operations with vectors - geoprocessing 2020-01-27 Thursday Lab Spatial operations with rasters - raster calculator and map algebra 2020-01-30 4 Spatial Operations II - Raster data Recorded Lectures Raster terrain analysis / raster algebra Monday Lab Raster terrain analysis 2020-02-03 Thursday Lab Raster spatial operations (Summative Assessment 2) 2020-02-06 5 Combining vectors and rasters Recorded lectures Zonal statistics / interpolation / cost analysis Monday Lab Combined spatial analysis 2020-02-10 Thursday Lab Combined spatial analysis (Summative Assessment 3) 2020-02-13 6 Reading Week No classes this week 2020-02-17 No classes this week 2020-02-20 7 Digital Cartography Recorded lectures Cartographic principles thematic mapping data visualization principles Monday Lab Combined exercises, all previous topics (Summative Assessment 4) 2020-02-24 Thursday Lab Digital cartography 2020-02-27 8 Remote Sensing Recorded Lectures Elementary physical principles Digital remote sensing Monday Lab Remote sensing data sources and download 2020-03-02 Thursday Lab Remote sensing image visualization / digitization (Summative assessment 5) 2020-03-05 9 Programmatic Geomatics Recorded Lectures Python / R introductory videos linkedin learning Monday Lab Programmatic Geomatics in Python 2020-03-09 Thursday Lab Programmatic Geomatics in R 2020-03-12 10 Data Collection Recorded Lectures Field data collection and classification validation Monday Lab Satellite image classification (Summative Assessment 6 - project proposal) 2020-03-16 Thursday Lab Data collection and classification validation 2020-03-19 11 Project Work Monday Lab Assisted project work 2020-03-23 Thursday Lab Assisted project work 2020-03-26 12 Project Work Monday Lab Assisted project work 2020-03-30 Thursday Lab Assisted Project Work 2020-04-02 Project Due Date 2020-04-14 1.9 Other Relevant Information Student attendance Please note that attendance at all practical classes is prescribed and support outside of timetabled hours cannot be guaranteed for students who fail to attend classes. Student attendance and engagement will be recorded by monitoring attendance or other participation at designated Academic Points of Contact detailed in the Module Outline. If a student fails to engage with one or more Academic Points of Contact, the module coordinator will contact the student to ascertain the reason for this and to encourage greater academic engagement. A list of acceptable and unacceptable reasons for absence can be found in the MSc Handbook. You should familiarise yourself with the Handbook for other guidance and requirements including an outline of the Common Grading Scheme. The minimum grade to obtain a pass for a module is 50%. The overall mark for the module is calculated from the sum of weighted component marks rounded to the nearest whole number; a pass is not required in each component. This module mark represents a summary of performance on that module. All assignments are to be submitted electronically via CANVAS Quizzes or as PDFs. Work that is submitted late will be returned with no feedback and graded with an appropriate penalty (3% per day late). Work that is handed in more than 7 days late will achieve a zero grade. Under some circumstances as outlined in the Student Handbook, extensions to the deadline for submission may be granted. Requests for such extensions must be completed on the appropriate form in advance of the submission deadline and emailed to the Module Coordinator. Retrospective applications for extensions will not be granted. "],
["lab1.html", "2 Lab 1 - QGIS overview and file management 2.1 Guided Exercise 1 - A simple GIS workflow 2.2 Self-guided exercise", " 2 Lab 1 - QGIS overview and file management 2.1 Guided Exercise 1 - A simple GIS workflow The purpose of this exercise is to give you a general overview of proper GIS workflow, from start to end. Throughout the module, your exercises and projects wil become more complex, but the general workflow will not change. Getting used to having proper project and file management habits from the start is the best thing you can learn. Speaking as someone whi has been teaching and working with Geomatics for more than a decade, poor file/project managemnt is the underlying cause of at least 50% of the GIS problems you may encounter. 2.1.1 Creating a project structure GIS projects generate a lot of different files quickly, so project organization is essential. The steps below are my suggestion for organizing GIS projects files and associated data. Once you get comfortable managing your own projects, feel free to change the proposed structure to something that best suits your own workflow. Create a folder on your computer called ENMPG11, off of the main data drive. For Windows, this will be C: in most cases, unless you have separate disk drives. For Linux and Mac, create it on you home drive. Windows C: mac OS home Ubuntu home Having complex file paths is a major source of problems. That is why we keep our main projects folder off a base folder. NEVER use spaces or special symbols on your folder and file names. Limit yourself to using letters A-Z and a-z, numbers 1-9 and just the underline (_) and dash (-) symbols. Remember that linux and Mac OS systems differentiate between upper and lower case letters, so ‘Filename.txt’ and ‘filename.txt’ are considered different. Windows does not differentiate cases, so the examples abovw would overwrite each other when saving. Inside the ENPG11 folder, create a subfolder called lab_1 Inside lab_1, create the following folder structure: This is the most “barebones” project structure you can have. The folders will bee used as follows: 00_qgis: we will use this folder to save our QGIS project files. 01_raw_data: this folder will keep all the original data files you are working with. This way you can always go back to the start if something goes wrong. We use the subfoldrrs vector and raster to easily know which data type we are working with. You should create additional subfolders inside each folder to keep things organized as you go. 02_processing: here we will keep all th files you generate as part of your work. Make ample use of subfolders to identify each step of the workflow. 03_final_products: here we will keep the final products of our intended analysis. This makes it easy for us to find the latest version of our intended outputs, without risking using intremediate files instead 04_docs: here we will keep all our non-GIS files. In the notes folder, you can keep a simple text file documenting the project steps as you work in it. You can also keeo important referece images here. In images, you can save any image that illustrates the steps you made, or maps you have produced. You can add other subfolders such as report if you are writing a report about your project, and keep the report file in there. Organize the data you’ve downloaded previosuly during the instructor-led QGIS exploration into your projec folder. The terrain data folder goes into raster, the roads data goes into vector, and the .txt metadata files go into docs/notes. You can keep the data into the original folders they came in, for easy identification: 2.1.2 Creating a QGIS project A QGIS project is an index file that will remember all the data layers you have loaded, their stacking order, the styling of each layer, and some other information, such as a default map projection and datum. It will also keep any map layouts that you create. **It will NOT store the data files!!*. Create a new project in QGIS by clicking on Project &gt; New... or pressing Ctrl-N: Add the layers NS_RoadLink.shp and NS89.asc from your organized project folder (terrain and roads) to your project. Save your project. Click on the Save button and give your project a name, nd save it on ENMPG11/lab_1/00_qgis. Open the project settings by clicking on Project &gt; Properties.... You will see this window: The main thing to set on your new project are the project home folder, the base map projection info and the measurement units. For the project home on the General tab, select the lab_1 folder. This helps navigating when opening and saving data. For measurement units, make sure distance units are set in meters, and area units in squared meters, also on the General tab. For base projection, go to the CRS tab and search for OSGB 1936 British National Grid, identified by the EPSG code 7405. EPSG stands for “European Petroleum Survey Group”, and designates a parameter database with standard codes for geodesic information. Over time, you will propbably memorize the EPSG codes for the projections you use more often, making it easy to search for Select it by clicking on it. Save your project by clicking on the Save button, or going to Project &gt; Save, or by typing Ctrl+S simultaneously. 2.1.3 Styling your layers and producing a simple map Select the NS89 layer on the Layers side panel, and drag it to the bottom of the layers list if not there already. Turn the roads layer off for now. Right-click on the layer name and choose Rename Layer. Rename it to Digital Elevation Model (50m). Open the file exlplorer in your system, and look for the NS89.asc file you have saved before. Stop and think: will changing a layer name in the layer panel also change the name of the source data file for that layer? Right clik on the terrain layer and choose Zoom to Layer. This is always a handy tool to “find yourself” if you end up zooming or panning the map too far. Pick a layer that covers most of your intended work area and zoom to it. (Advanced: you can also set a Spatial Bookmark by going to View &gt; New Spatial Bookmark...(Ctrl + B). You bookmarks will show on your Browser side panel, below your Favorites). Right click on the terrain layer name and select Properties..., then go to the Symbology tab. Select Rendering type to be Single Band Pseudocolor, and Color Ramp as spectral. Click again on the down arrow button to the right of the Color Ramp box, and select Invert Color Ramp, so that the minimum heights are colored blue. Then click OK. Save your project. Stop and think: Why bother inverting the color ramp for this dataset? Rename the NS_RoadLink layer to Road Network. Go to its Symbology properties and click on Simple Line. Change the line color to a mid-grey, and the line width to 0.3. Click OK. Reactivate the layer to visualise it. Go to the Vector menu and select Research Tools &gt; Extract Layer Extent.... Select the terrain layer as your Input layer, and click Run to generate a temporary layer. This layer will not be kept once you close QGIS, unless you save it manually later. The window will not close automatically once you run, so remember to click on Close when you are done. Go to Vector &gt; Geoprocessing Tools &gt; Clip.... Select the roads layer as the Input Layer and the new temporary layer as the Overlay Layer. This time, we will save the output. Click on the ... button to the right of the Clipped text box, and then choose Save to file. Save your new layer on ENMPG11/lab_1/processing, naming it clipped_roads.shp. Make sure the SHP file format is selected below the file name. Turn the original roads layer on and off to see the result of your operation. Then right-click on the original roads layer, and select Styles &gt; Copy Style &gt; All Style Categories. Then right click on the new (clipped) roads layer and select Styles &gt; Paste Style &gt; All Style Categories. Remove the original roads layer from your project and save the project. Close QGIS. Stop and think: what does the warning given by QGIS when you try to close it means? Reopen QGIS, and load back your project. Notice it remembers exaclty where you last saved it, including zoom level, layer names and layer styles. If the “Extent” layer still shows on the side panel, remove it (as the source data file was not saved, this entry now links to nothing). Click on Project &gt; New Map Layout and name it Lab 1 Layout. A new window will open with the QGIS Layout Editor. Add a new map to the layout by clicking on the icon. Drag it through the page so it covers about 2/3 of it horizontally, and the full page (minus borders) vertically. Use the Interactive Extent tool to pan and zoom until your data uses most of the map area. Make sure you are not hiding the edges of your map with too much zoom! Now fine tune the map scale by changing the Scale value on the right panel. Remember that this value means “1:value”, meaning 1 unit on the page is equal to that many units (value) in the real world. This means larger numbers will “zoom out”, and smaller numbers will “zoom in”. Try to make the map fill as much as possible of the map box, without clipping the edges. Go to the menu Add Item &gt; Add Legend... (notice the icon for this option, and find it on the side toolbar). Click the area beside the map box and drag to add a legend. Go back to the main QGIS window, right click on the terrain layer name, and on the Symblogy tab, change the Mode under the class color box to Equal Interval, and select the number of Classes to 10 (to the right of the Equal Interval box). Go back top the Map Layout eritor. Go to the menu Add Item &gt; Add Scalebar (notice the icon for this option, and find it on the side toolbar). Click and drag below the legend to add it to the map layout. Add a title to your map using the Add Label... tool (either on the Add Item menu or selecting the tool directly from the lef sidebar). You can change the text by replacing the “Lorem ipsum” placeholder with your own text on the left pane. Try to make it Bold with a font size of 16. Rearrange the items on the page until you are pleased with the results. Then go to Layout &gt; Export as PDF..., and export your map, naming it properly and saving it on ENMPG11/lab_1/products. Save your map layout by clicking on the save button in the Map Layout Window and close it. Then save your Project on the main QGIS window and close QGIS as well. Reopen QGIS, and go to Project &gt; Layout Manager. The layout you created previosuly show appear on the list. Select it and click on Show. Congratulations! You have sucessfully finished your first GIS project, using proper file management practices. As a final suggestion, create a “workflow_notes” file on ENPMG11/lab1/notes and write up a quick overview of what you did, along with any specific notes you would like to remember later. 2.2 Self-guided exercise Create a new project folder for this new project, under your main ENMPG11 work folder. Then obtain layers for “Sites of Special Scientific Interest” from The Scottish Natural Heritage Natural Spaces collection: https://gateway.snh.gov.uk/natural-spaces/. Use the ESRI Shapefile data format. Then also obtain data for roads and rivers from the Ordnance Survey Open Data page: https://www.ordnancesurvey.co.uk/opendatadownload/products.html. Again, use the ESRI Shapefile format. Organize all the layers into your project folders as suitable, and then produce a map of a SSSI area of your choice, showing the SSSI, roads and rivers, at a map scale of 1:150000 (meaning a smaller real world distance). Save your analysis as a project, and export your map as a PDF. "],
["lab2.html", "3 Lab 2 - Working with vector data - Attributes 3.1 Guided Exercise 1 - Basic work with Vector Data 3.2 Guided Exercise 2: Operations using layer attributes 3.3 Guided Exercise 3 - Spatial Queries 3.4 Self-guided summative assessment.", " 3 Lab 2 - Working with vector data - Attributes The purpose of these exercises is for you to learn and understand the main GIS operation involving vector data attributes. It will cover both some geometry operations and attribute operations. Try to apply all the steps you have already learned on previous modules here as well: create a project folder, organize your data, save a named project with proper projection info, etc. The expectation is that you build up upon previous activities on each consecutive lab, so towards the end of the module you feel empowered to carry on with your own project. 3.1 Guided Exercise 1 - Basic work with Vector Data Dowload the data for this exercise from the link below, then extract the zipfiles. https://stir-my.sharepoint.com/:f:/g/personal/ts35_stir_ac_uk/En54tCrr8_NNl9dCo9Wa2hEBItv9QecNaVWL09p9j3EYnA?e=rXF5x4 Load all datasets in QGIS and inspect them: Stop and think: What are the datasets you have? What are the file types you have to work with? Which of these files contain metadata about your datasets? What are the file formats you have to work with? What is the Map Projection of each data layer you have? Once you have the answers to the above questions, exit QGIS without saving. Then create a structured project folder, and distribute the datafiles accordingly. Then reopen QGIS, load the data from the organized project folder, check you Project properties to make sure they are correct and then save your project file within your organized folder structure as well. Now inspect the attributes for each layer: Stop and think: How many attributes does each layer have? How many features does each layer have? What are the different data types among all attributes? Rename your layers on the layer list using human-readable, informative names. Save your project Organize the layer order and play with different layer superpositions to make the best visualization for all datasets involved. Then experiment with the symbology of each layer to improve your visualization. 3.2 Guided Exercise 2: Operations using layer attributes Turn off the Rivers and Earthquakes layers. Go to Layer Properties &gt; Symbology for the World Countries layer, and change the option from Single Symbol to Categorized. For value, choose REGION_UN. Leave the Symbol option as is, and for Color Ramp, select Random Colors. Then click on Classify on the bottom left of the window. Then click on OK. Stop and think: Why is this symbology option called Categorized? Return to the Symbology window and select Graduated instead of Categorized. Change your Value to POP_EST. Choose Magma as your color ramp, change Mode (below empty space) to Equal interval, leave Classes as 5, and then click on Classify. Click OK. Return to the Symbologywindow, change mode from Equal Interval to Natural Breaks (Jenks), and increase Class to 10. Click on OK. Stop and think: Why is this symbology option called Graduated? Turn on the Rivers layer, and open its attribute table. Click on the Select features using expression button: On the middle column, go to Fields and Values and then double click on KILOMETERS. It will be added to the left column. Complete the expression so it reads \"KILOMETERS\" &gt; 5000. Check the results of your selection on both the Attribute Table and the plotted layer geometry. Stop and think: Does it seem like the selection is missing a few famous longest rivers? Why would that be? Change your expression to \"SYSTEM\" = 'Amazon' and run a new selection. On the bottom left of the Attibute Table, select Show Selected Features. How many rivers are there in the Amazon system, according to this dataset? Back on the main QGIS window, click on the Show Statistical Summary tool. A new pane will open. Select the Rivers layer as input, then click on the bottom on Selected Features Only. Then select Kilometers on the drop-down menu under the layer name. What is the length, in kilometers, of all rivers of the Amazon system combined? Stop and think: Does it seem like the selection is missing a few famous longest rivers? Why would that be? Go back to the Attibute Table window for the Rivers layer. Click on the Field Calculator tool (). On the new window, uncheck the Only update selected features options if it is checked. Then name the new field Miles_Km, and change the output type to Decimal Number. On the expression window, write \"MILES\" / \"KILOMETERS\". Note the warning at the bottom. Once you click OK, turn off editing mode by clicking on the icon. Save you layer when asked to. Stop and think: Does the Miles to Km conversion factor you calculated seem right? Click on the Delete Field button (), and select Miles_Km. Click OK. Then click on the Deselect All button, to clear your previous selection of Amazon system rivers. Click on the Add Field button (). Create a field named Region, of Text(string) type, and Length of 50. Click OK. Return to the Field Calculator, and select Update Existing Field instead. Select Region as the field to be updated, and then simply type 'Unknown' on the Expression window. Don’t forget the quotes. Click OK. Exit edit mode choosing yes to save your edits. Save your project! 3.3 Guided Exercise 3 - Spatial Queries Go to Vector &gt; Research Tools &gt; Select by Location.... Select the Earthquakes layer as Select features from. Then check only the Are within query option. As the comparison layer, choose your World Countries layer. Take a look at the options under Modify current selection by, and then set it at Creating New Selection. Click Run, and after it is finished, click Close. Open the Attibute Table for the Earthquakes layer. Stop and think: - How many Earthquakes were originated on land in 2011? On the Field Calculator, create a new field called Origin. Do keep the option Only update selected features checked. The field should be of text type and length 10, and on the Expression window, write 'Land'. On the Attribute Table window, click on ‘Invert Selection’(). Then return to the Field Calculator and Update the Origin field by designating the newly selected features as 'Ocean'. Style your points by ‘Origin’ using the Symbology options. On the World layer, use Attribute selection (as done on Exercise 2) to select all countries from South America. Then go to Vector &gt; Research Tools &gt; Select by Location... and select all Earthquakes that are contained within the Countries layer (same process as item 1 above), but this time make sure you turn the option Selected features only on. Right-click on the Earthquakes layer name on the left panel and choose Export &gt; Save selected features as.... Name you exported file as Land_earthquakes_2011_south_america, choose the appropriate folder to save it within your project structure by clicking on the ... button to the left of the file name box, and select your format of choice (Geopackage or Shapefile). Click on OK. Save your project. 3.4 Self-guided summative assessment. See Assessments tab on Canvas page. "],
["lab3.html", "4 Lab 3 - Working with vector data - Geoprocessing Tools 4.1 Guided Exercise 1 - Clipping data", " 4 Lab 3 - Working with vector data - Geoprocessing Tools (STILL INCOMPLETE, BEAR WITH ME ) During the previous lab, we looked at how to solve probles using vector attributes, making selections based on both attribute values and on spatial relations. For this exercise, we will learn how to do operations on the vector geometries instead. 4.1 Guided Exercise 1 - Clipping data Dowload the data for this exercise from the link below, then extract the zipfiles. Load all datasets in QGIS and inspect them: Stop and think: What are the datasets you have? What are the file types you have to work with? What are the file formats you have to work with? What is the Map Projection of each data layer you have? Load the Scotland regions vector layer and the Scotland Roads vector layer. Select only the polygon corresponding to Central Scotland. You can do it using either the selection tool () or by using the Attribute Table, using the skills you’ve learned on the previous practical. Right click on the Scottish Regions layer name and select Export &gt; Save file as.... Select the format as Geopackage, the file name as central_scotland, and the layer name as central_scotland_limits. Check the box that says selected features only. Stop and think: why did we have to specify both a file name d a layer name in this case? Now remove the Scotland Regions layer, and open the Scotland Road Links layer from the initial Geopackage file. Visualize and inspect the layer, and how it overlaps with the Central Region polygon you have created. Go to Vector &gt; Geoprocessing &gt; Clip.... Select the roads layer as your input layer, and the Central Scotland region as your overlay layer. Leave everything else as default and Run. Once it is finished, Close the window. Stop and think: what would happen if you closed you QGIS session while having temporary layers on your project? Right click on the newly created temporary layer, then go to Export &gt; Save data as.... Keep the geopackage format, and select the same central_scotland geopackage you created before. **Specifiy the layer name as central_scotland_roadlinks. Save. On your Browser side pane, click on the refresh button (), and then expand the layers inside your central_scotland.gpkg file. What are the layers inside? Repeat the clipping process done for the roads on the Scotland rivers layer on the initial Scotland geopackage. This time, instead of saving to a temporary file, click on ... to the right of the file name box, and select Save to Geopackage.... Pick your Central Scotland geopackage and when the layer name window pops up, name it central_scotland_rivers. Once done, refresh the Browser and check the contents of your Central Scotland geopackage again. Finally, open the "],
["lab4.html", "5 Lab 4 - Working with raster data - the basics 5.1 Guided Exercise 1 - Opening and inspecting raster data 5.2 Guided Exercise 2 - Styling raster data 5.3 Guided Exercise 3 - Mathematical and boolean operations using the Raster Calculator 5.4 Guided Exercise 3 - Masking and reprojecting raster data.", " 5 Lab 4 - Working with raster data - the basics So far, we have been working within the realm of vector data: beautiful topological combinations of vertices and lines to represent the complexity of the Earth’s surface. But there are plenty of situations where vectors are not the best choice; any information that varies gradually and continuously over the surface can be better represented by rasters For this exercise, we will learn to inspect and style raster data, and also how to do some mathematical operations among raster layers. 5.1 Guided Exercise 1 - Opening and inspecting raster data Download the required data for Lab 4 from the lab data link on Canvas. Download additional data from . You want the offical country divisions for the United Kingdom. Pick Geopackage or Shapefile, your choice. Open the four layers contained in the UK administrative boundary data. Keep the layer that shows only the overall boundaries for the UK, and remove the others from the project. Add the UK_SRTM.tif, UK_Bioclim.tif and CLC2018_CLC2018_V2018_20_UKclip.tif raster files to your project. For each of them, right-click on the layer name and go to Properties &gt; Information, then: Stop and think: What are the datasets you have? What are the file types you have to work with? What are the file formats you have to work with? What are the map projections of each dataset you have (vector and raster)? What are the lenght units of each raster dataset? What are the data types of each raster dataset? What are the dimensions (rows, columns) of each raster dataset? How many bands does each raster dataset have? What are the pixel sizes of each raster dataset? 5.2 Guided Exercise 2 - Styling raster data Select the CORINE land cover data layer and go to Properties &gt; Symbology. Not that the default symbology for single band rasters is Singleband gray. Change it to Paletted / Unique Values. Maintain the Random Colors option, and classify. Aplly the result to your raster and visualise it. Stop and think: How many categories are there on this raster? What do the numbers represent? Fortunately for us, the data producers of CORINE include a color map file as part of the metadata. Back on the Symbology window, click on the ... to the right of Delete All and choose Load Color Map from File.... Find and select the metadata file named CLC2018_CLC2018_V2018_20_QGIS.txt. Apply and then click OK. Thank you CORINE team! Now go to the Symbology window for the Bioclim dataset. Notice that the default symbology choice for multiband rasters is Multiband color. That option is appropriate for satellite images and aerial photography, where each band represents a different region of the electromagnetic spectrum, and then bands can be assigned to the Red, Green and Blue color channels of your screen. Since our data does not comprise images, but layers where pixel values represent real variables, we need to use the Single band - pseudocolor option. Choose the bio1 band, and select the magma color ramp. Classify the existing values and then Apply and click OK. Stop and think: What data is bio01 showing? What units are the minimum and maximum values shown on the color scale? Why such a strange choice for the units? Return to the Symbology window, and expand the option Min / Max Value Settings. What is the default option selected? Experiment with the other options (with different percent clips and standard deviations) and see how the Symbology changes. Remember to Apply the changes every time you change any options. Still on the Symbology window, change the Classification options (drop down menu to the left, under the classes) from Continuous to Equal Interval. To the right of it, select the numnber of classes as 3. Apply and evaluate. Without changing your number of classes, change the Interpolation option above the classes from Linear to Discrete. Apply and evaluate. Take some time to play with these visualisation options to analyse the distribution of different Bioclimatic variables in the UK, and think what they mean for plants, (non-human) animals and in terms of social and economic factors. Finally, let’s work on the Symbology for the SRTM data. On the Symbology window, choose the Singleband Pseudocolor option, and then on the Color Ramp option, select Create New Color Ramp. On the small options window that comes up, select Catalog:cpt-city. Once the catalog window opens, go to the Topography list and select the cd-a palette. Then classify your elevation values using the User Defined Min /Max option, and type 0 as Min and 900 as Maximum. Apply and visualise. Then, befor closing the Properties window, go to the Transparency table and drag the slider at the top to around 60%. Right-click on the SRTM layer name and select Duplicate layer. Then on the Symbology of the copied layer, change the render type to Hillshade. Apply and close the window. Make sure the copied layer is immediately under the original layer, and alternate each layer between on and off. Stop and think: What does the hillshade render style does? How? 5.3 Guided Exercise 3 - Mathematical and boolean operations using the Raster Calculator Go to the menu Raster &gt; Raster Calculator.... This tool allows you to apply several mathematical funtions to raster layer values and even to do calculations among values. First, find the Bio1 layer of the Biolcim raster. From the metadata, we know it is the first band, so double-click UK_bioclim@1 to add it to the expression area. In this context @1, @2, etc. indicate the respective raster band number. As we saw above, the Bio1 layer corresponds to Annual Average Temperature, with a unit of degrees Celsius multiplied by ten. Let’s convert it to regular degree Celsius units. On the expression area, after UK_bioclim@1, write / 10. Then, on the top right corner, select a folder to save your file and name it appropriately. Then click OK. Style your new layer in the same style used for the original Bio1 layer, using the full Min / Max range, and marvel at the abysmal maximum average temperature values for the UK. Can you spot the London heat island effect? Let’s say we would like to relocate to the hottest (in average) locations of the UK. Go back to raster calculator, and enter the expression UK_bioclim@1 &gt; 100 (or use your new layer and select areas &gt; 10). Save the result as UKs_last_hope.tif. Go to the Symbology layer of your newly created layer and select Paletted / Unique Values, then Classify. Then, remove the 0 values from the legend using the - (minus) button. Click on the color box for the 1 values and select a strong red color. Finally, go to the Transparency tab and drag the slider to around 50%. Then Apply and close the window. Position your temperature range layer just above the terrain and hillshade layers, and make sure only these three are visible. 5.4 Guided Exercise 3 - Masking and reprojecting raster data. It may have been bothering you that the UK seems “squished” during your work. That is because the data is ‘unprojected’, using only the WGS-84 datum geograophic coordinates. Although data in geographic coordinates is often referred to as “unprojected”, this is not actually true (you are looking at it on flat screen, right?). For these “unprojected” datasets, what most GIS software do is to simply use a linear function to convert latitudes and longitudes in degrees to x and y values on your screen. This projection can be referred as Plate Carrée or Equirectangular projection, where degree coordinates are simply converted to radians and multiplied by a scale factor to become x and y coordinates. This projection has a heavy amount of distortion towards the poles: To reproject the data, go to Raster &gt; Projections &gt; Warp (Reproject...). Select your SRTM layer as the Input Layer, and the EPSG: 27700 - OSGB 1936 / British National Grid as the output projection. Set the output file resolution to 90 (this will be in meters, as meters are the units of the BNG projection). Then save your file as UK_SRTM_BNGreproj.tif. Run the algorithm and then Close when finished. Repeat the process for the Bioclim layer (use a cell size of 1000m), your “last hope” layer and the CORINE landcover map (cell size of 100m). It seems nothing has really changed, right? That is because QGIS does reprojections “on the fly” to make sure the data in the screen are as best aligned as possible. As the project always takes the Coordinate System of the first layer added to it, it is set to Geographic WGS84, and it is reprojecting your BSG files back to WGS84 to align them with the WGS84 data. CLose your project, and then start a new project, loading only the BSG reprojected layers. Does it look better now? We often want to remove parts (specific cells) of a raster, a process called masking. For example, let’s say we want to get the mean average annual temperature andvisualize the temprature ranges for out “last hope” regions only. Lets go to the Raster Calculator, and use the expression (UK_Biolcim@1 / 10) * UKs_last_hope@1. Name the resulting layer and save it, then style the result using a Pseudocolor color ramp. However, this time manually specify the Min value as 10. Stop and think: what happened to the temperature values when we applied the expression above? Use the information tool to probe a few values of the new raster to help you think about it. Return to the Properties of the new masked layer, and select the Transparency tab. On the table named Transparent pixel list, click on the + (plus) button to add a new line. Fill the line with the values from = 0, to = 0 and Percent Transparent = 100. Apply and evaluate the result. Stop and think: did you actually change the contents of the raster layer when you set the transparent pixels? Now click on the menu Processing &gt; Toolbox.... Welcome to the QGIS toolbox! You will find many addtional functions here to process vectors ans rasters, as well as functions from external software that can be accesses through QGIS. On the search bar at the top, search for Raster layer zonal statistics. Double click on the tool with that name that comes up from the search. As Input layer, select the degree Celsius temeprature layer you created, and as Zones layer, select the “last hope” layer (the one with the 0/1 values, not the masked temoerature layer). Run (it will take a while) and then Close. Vectors can also be used as masks. Go to Raster &gt; Extraction &gt; CLip Raster by Mask Layer.... Select your Celsius converted average temperature raster as input layer, the gadm36_GBR_0 as your mask layer, and check keep the resolution of the input raster. Run the algorithm (it will take a while) then Close the window when finished. Copy the layer style from the original UK_SRTM to the masked layer, zoom to the original UK_SRTM layer extent and compare the results before and after the masking. 5.4.1 Formative Assessment Is there any difference in mean values of average annual temperature between urban areas and forests in the UK? Make a map (including legend and scale) showing you results visually. Hint 1: To ensure raster operations work properly, all rasters must be in the same projection. Hint 2: You can also use AND and OR to create compound expressions on the raster calculator (just make sure you type them in all caps). "],
["lab5.html", "6 Lab 5 - Working with raster data - continued 6.1 Guided Exercise 1 - Converting rasters to vectors 6.2 Guided Exercise 2 - Zonal statistics redux 6.3 Guided exercise 3 - Terrain Analysis", " 6 Lab 5 - Working with raster data - continued During the last practical, we started to learn how to use rasters for our GIS analysis. Today, we will continue discovering new ways of work with rasters, and also start to integrate rasters and vectors into combined analyses. 6.1 Guided Exercise 1 - Converting rasters to vectors For the previous lab, you used (or tried to) a funtion to extract zonal statistics from rasters, using a second raster as a mask. The process was very computer intensive, however. Stop and think: Thinking back on what you know about rasters now, why would this processes be so computer intensive? However, there is a second option, which is to use vector layers as the zones for extracting statistics. Download the required data for the previous lab (lab 4) if you don’t have it ready to go anymore, and the data for lab 5 from the lab data link on Canvas. Recreate the raster layers UK_Bioclim_temp_celsius and UKs_last_hope if you don’t have them anymore. Stop and think: Did you take time during the last practical to organize your project folder and back up your work data before leaving the classroom? Or did you have to re-do the analysis. Remember, project organization and backups might be the difference between doing very well vs not so well in this module! Now go to Raster &gt; Conversion &gt; Polygonize (Raster to vector).... Select your “last hope” layer as the input, and leave everything else as default. Run and then Close. Stop and think: What did you get as a result? Are all of the resulting polygons needed? Open the attibute table of your newly created vector layer, and do an attibute selection to select all polygons where DN = 0. Close the selection window, confirm your selection is correct, and then click on Delete selected features. Then save your edits and turn off editing mode. Make your layer permanent as UKs_last_hope_vectorized.shp. 6.2 Guided Exercise 2 - Zonal statistics redux If it is not visible already, enable your Processing Toolbox panel by going to Processing &gt; Toolbox.... Search for the function Zonal statistics (Not Raster layer zonal statistics) and double click on it to open the tool window. Select the UK celsius layer as the Raster layer and you vectorized “last hope” layer as the Vector layer containing zones. Then click on the button to the side of Statistics to calculate, and check Stdev, Min and Max in addition to the three already checked. Run and close. Open the attribute table of the vectorized “last hope” layer. You will find the required statistics calculated for each polygon, as new attributes. Set the symbology of your new vector layer as a Graduated color ramp for TdegC_max. Where should a person live in the UK if they don’t like the cold? 6.3 Guided exercise 3 - Terrain Analysis One of the most often used raster datasets are terrain data. These are generally called Digital Elevation Models or DEMs. If you are certain that these elevations represent the bare surface of the Earth (i.e. no treesm buildings, etc.) then it is also a Digital Terrain Model (DTM). If it represents the overall top of varied surfaces (tops of treees, tops of buildings, etc.) then it is a Digital Surface Model (DSM): DSM, DTM and Aerial Photo of the same site Open the UK_SRTM.tif layer from Lab 4. SRTM stands for Shuttle Radar Topography Mission. It was a mission flown by NASA in to acquire accurate topographical data for the entire globe. There are multiple versions of SRTM around, with two main being the High-Resolution (1 arc-sec, ~30m) data directly distributed by NASA, currenlty on version 3, and the coarser 3 arc-second (~90m) resolution data provided by the Consortium for Spatial Information (CSI), which has further corrections for data problems. SRTM (NASA): https://lpdaac.usgs.gov/products/srtmgl1v003/ SRTM (CSI): https://cgiarcsi.community/data/srtm-90m-digital-elevation-database-v4-1/ Apply a good Symbology to the layer to make changes in elevation more visible. Apply a mask to the elevation data, using the UK boundaries vector layer as explained on the previous lab. This time, type -999 to the Assign a specific nodata value to output bands. This will help keep the ocean “transparent” when viewing the data. We can’t do that on the original data because the ocean is at 0m elevation, so if we make it trasparent, we also lose several coastal regions. Keep as a temporary layer for now. Now we need to reproject the raster to a projected system that has horizontal units in meters. Since slope is calculated based on vertical distance travelled vs. horizontal distance travelled, we need both to be in the same units or we’ll get very strange results. As done on the previous practical, reproject your temporary masked layer to BSG, and save it as UK_SRTM_masked_BSG.tif. The close your project and start a new one with this layer only. Go to Raster &gt; Analysis &gt; Slope.... Select the masked UK DEM as the input layer, and leave everything else as default. Run and Close. Style both the elevation layer and the slope lay using continuous color ramps, and compare your resulting layer with the UK elevation layer. Stop and think: What is the result of this tool? What are the units and what do they represent? Another terrain metric that is very useful is called aspect, and it indicated to which cardinal direction the slope is facing. Changes in slope orientation often imply in different amounts of total daily and annual insolation, and total annual precipitation. To calculate it, go to Raster &gt; Analysis &gt; Aspect.... Select the option Return zero for flat instead of -9999. Then Run and Close. Style it and compare to the other two layers. Remember to always use the elevation layer as the input for any terrain calculation. There are two other terrain metrics (or geomorphometric variables) easily acessible in QGIS: Terrain Position Index (TPI) and Terrain Ruggedness Index( TRI). Their description can be found in the QGIS User Manual: https://docs.qgis.org/3.4/en/docs/user_manual/processing_algs/gdal/rasteranalysis.html#terrain-ruggedness-index-tri https://docs.qgis.org/3.4/en/docs/user_manual/processing_algs/gdal/rasteranalysis.html#terrain-ruggedness-index-tri What they both try to capture is the general “rugedness” of the terrain, i.e. does it strecth for long, flat areas or does it have many abrupt variations in elevation?. Calculate both by acessing them on the Raster &gt; Analsis... menu. Stop and think: What is the result of this tool? What are the units and what do they represent? Extract the data from the Dumyat.zip. This data has been dowloaded from DigiMap, from the “Lidar Scotland 1m Phase 1” dataset, and is a very high resolution DEM for the Dumyat hill, just behind the university campus. Load all five datasets (from the nn and ns folder) into your project. Notice they are a different format, called XYZ Asc or .asc. Description here: https://digimap.edina.ac.uk/webhelp/digimapsupport/common_help/data_download/data_formats.htm#XYZ Stop and think: Why do the loaded files have very apparent “seams” between each data file? Go to Raster &gt; Miscellaneous &gt; Merge.... Click on the ... button to the left of Input Layers, and select the five new Lidar rasters you loaded. Run and Close. Stop and think: - What did we just do with our rasters? Why is that a big black area around the elevation data? Go to Raster &gt; Extraction &gt; Clip Raster by Extent.... Select your mosaic (that is the name we give to several rasters “stitched” together\") as Input Layer and then click on the ... button to the left of Clipping Extent. Select the option Select extent on canvas.... The window will disappear for a moment. Click on the top left corner of the main terrain data area and draw a tight rectangle around it, excluding most of the black areas and the little bit of extra data on the bottom left. Once you finish drawing, will be taken back to the Clip window. Before clicking Run, set the actual file name to save this time, using Dumyat_DTM_5m.tif as the name. Then Run and Close. Then remove all of the previous separate LiDAR elevation layers and load only this final file. Set the style for Dumyat layer, and then copy it ((Right click on layer name) &gt; Styles &gt; Copy Style) and paste it on the UK_SRTM_masked_BSG data set. Drag it to just under the Dumyat layer, and turn it on and off to compare the difference between looking at elevation data at 5 meters instead of 90 meters. You may want to use the Hillshade visual trick learned on the previous practical to help emphasize the differences. JUst remeber to turn both the elevation and the hill shade on and off at the same time when comparing. Now turn off all layers except for the Dumyat DEM and its hillshade. Go to View &gt; New 3D map view. It will open a new window. Make the window larger by dragging its corners, and the click on the Configure (wrench) button. Change the type from Flat terrain to DEM(Raster layer), and select the Dumyat_DTM_5m layer as the Elevation, then click Ok. Use the navigation controls to tilt, zoom and pan your 3D visualization. Then go back to the Configure menu and change Vertical scale to 5. Stop and think: What is the problem of using hillshade on the SRTM data at this map scale? (Have you ever played the game called Minecraft?) Stop and think: what does the Vertical scale parameter do? 6.3.1 Formative Assessment Let us revisit the previous formative assignment, now empowered with our ability to mix vectors and rasters in the same analysis. Is there any difference in mean values of average annual temperature between urban areas and forests in the UK? Make a map (including legend and scale) showing you results visually. HINT: there is an already vectorized land cover dataset on the folder for Lab 5 data. But it is for the whole of the EU. Luckily, you already know how to do spatial selections or attribute selections using vectors, so using your previous knowledge and/or previous lab data, you should be able to extract the UK from the CORINE dataset as a new vector. Does aspect affect annual average temperature and total annual precipitation in the UK? For reference, use the following categories: Table 6.1: Cardinal directions in angles Direction Aspect.range North 337.5° - 360° and 0° - 22.5° Northeast 22.5° - 67.5° East 67.5° - 112.5° Southeast 112.5° - 157.5° South 157.5° - 202.5° Southwest 202.5° - 247.5° West 247.5° - 292.5° Northwest 292.5° - 337.5° Stop and think: Why do we need to separate “North” into two angle ranges? "]
]
