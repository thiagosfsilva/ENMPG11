<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Lab 3 - Working with vector data - Geoprocessing Tools | ENMPG11 Geomatics - Module Workbook</title>
  <meta name="description" content="Workbook for the ENMPG11 Geomatics Graduate Module at University of Stirling." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Lab 3 - Working with vector data - Geoprocessing Tools | ENMPG11 Geomatics - Module Workbook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Workbook for the ENMPG11 Geomatics Graduate Module at University of Stirling." />
  <meta name="github-repo" content="thiagosfsilva/ENMPG11" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Lab 3 - Working with vector data - Geoprocessing Tools | ENMPG11 Geomatics - Module Workbook" />
  
  <meta name="twitter:description" content="Workbook for the ENMPG11 Geomatics Graduate Module at University of Stirling." />
  

<meta name="author" content="Thiago Silva" />


<meta name="date" content="2020-02-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="lab2.html"/>
<link rel="next" href="lab4.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />












<link rel="stylesheet" href="toc.css" type="text/css" />
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">ENMPG11 Workbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="chapter" data-level="1" data-path="outline.html"><a href="outline.html"><i class="fa fa-check"></i><b>1</b> Module Outline and General Info</a><ul>
<li class="chapter" data-level="1.1" data-path="outline.html"><a href="outline.html#staff-and-communication"><i class="fa fa-check"></i><b>1.1</b> Staff and Communication:</a></li>
<li class="chapter" data-level="1.2" data-path="outline.html"><a href="outline.html#about-the-module"><i class="fa fa-check"></i><b>1.2</b> About the Module</a></li>
<li class="chapter" data-level="1.3" data-path="outline.html"><a href="outline.html#intended-learning-outcomes-ilos"><i class="fa fa-check"></i><b>1.3</b> Intended Learning Outcomes (ILO’s):</a></li>
<li class="chapter" data-level="1.4" data-path="outline.html"><a href="outline.html#readings-and-resources"><i class="fa fa-check"></i><b>1.4</b> Readings and Resources</a></li>
<li class="chapter" data-level="1.5" data-path="outline.html"><a href="outline.html#attendance-and-points-of-contact"><i class="fa fa-check"></i><b>1.5</b> Attendance and Points of Contact</a></li>
<li class="chapter" data-level="1.6" data-path="outline.html"><a href="outline.html#class-schedule-and-structure"><i class="fa fa-check"></i><b>1.6</b> Class Schedule and Structure</a></li>
<li class="chapter" data-level="1.7" data-path="outline.html"><a href="outline.html#assessment-and-grading"><i class="fa fa-check"></i><b>1.7</b> Assessment and Grading</a><ul>
<li class="chapter" data-level="" data-path="outline.html"><a href="outline.html#hands-on-problems-50-of-final-grade"><i class="fa fa-check"></i>1) Hands-on problems (50% of final grade)</a></li>
<li class="chapter" data-level="" data-path="outline.html"><a href="outline.html#final-individual-project-50-of-the-final-grade"><i class="fa fa-check"></i>2) Final individual project (50% of the final grade)</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="outline.html"><a href="outline.html#module-timetable-and-dates"><i class="fa fa-check"></i><b>1.8</b> Module Timetable and Dates</a></li>
<li class="chapter" data-level="1.9" data-path="outline.html"><a href="outline.html#other-relevant-information"><i class="fa fa-check"></i><b>1.9</b> Other Relevant Information</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="lab1.html"><a href="lab1.html"><i class="fa fa-check"></i><b>2</b> Lab 1 - QGIS overview and file management</a><ul>
<li class="chapter" data-level="2.1" data-path="lab1.html"><a href="lab1.html#GE1"><i class="fa fa-check"></i><b>2.1</b> Guided Exercise 1 - A simple GIS workflow</a><ul>
<li class="chapter" data-level="2.1.1" data-path="lab1.html"><a href="lab1.html#creating-a-project-structure"><i class="fa fa-check"></i><b>2.1.1</b> Creating a project structure</a></li>
<li class="chapter" data-level="2.1.2" data-path="lab1.html"><a href="lab1.html#creating-a-qgis-project"><i class="fa fa-check"></i><b>2.1.2</b> Creating a QGIS project</a></li>
<li class="chapter" data-level="2.1.3" data-path="lab1.html"><a href="lab1.html#styling-your-layers-and-producing-a-simple-map"><i class="fa fa-check"></i><b>2.1.3</b> Styling your layers and producing a simple map</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="lab1.html"><a href="lab1.html#self-guided-exercise"><i class="fa fa-check"></i><b>2.2</b> Self-guided exercise</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lab2.html"><a href="lab2.html"><i class="fa fa-check"></i><b>3</b> Lab 2 - Working with vector data - Attributes</a><ul>
<li class="chapter" data-level="3.1" data-path="lab2.html"><a href="lab2.html#guided-exercise-1---basic-work-with-vector-data"><i class="fa fa-check"></i><b>3.1</b> Guided Exercise 1 - Basic work with Vector Data</a></li>
<li class="chapter" data-level="3.2" data-path="lab2.html"><a href="lab2.html#guided-exercise-2-operations-using-layer-attributes"><i class="fa fa-check"></i><b>3.2</b> Guided Exercise 2: Operations using layer attributes</a></li>
<li class="chapter" data-level="3.3" data-path="lab2.html"><a href="lab2.html#guided-exercise-3---spatial-queries"><i class="fa fa-check"></i><b>3.3</b> Guided Exercise 3 - Spatial Queries</a></li>
<li class="chapter" data-level="3.4" data-path="lab2.html"><a href="lab2.html#self-guided-summative-assessment."><i class="fa fa-check"></i><b>3.4</b> Self-guided summative assessment.</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lab3.html"><a href="lab3.html"><i class="fa fa-check"></i><b>4</b> Lab 3 - Working with vector data - Geoprocessing Tools</a><ul>
<li class="chapter" data-level="4.1" data-path="lab3.html"><a href="lab3.html#guided-exercise-1---clipping-data"><i class="fa fa-check"></i><b>4.1</b> Guided Exercise 1 - Clipping data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lab4.html"><a href="lab4.html"><i class="fa fa-check"></i><b>5</b> Lab 4 - Working with raster data - the basics</a><ul>
<li class="chapter" data-level="5.1" data-path="lab4.html"><a href="lab4.html#guided-exercise-1---opening-and-inspecting-raster-data"><i class="fa fa-check"></i><b>5.1</b> Guided Exercise 1 - Opening and inspecting raster data</a></li>
<li class="chapter" data-level="5.2" data-path="lab4.html"><a href="lab4.html#guided-exercise-2---styling-raster-data"><i class="fa fa-check"></i><b>5.2</b> Guided Exercise 2 - Styling raster data</a></li>
<li class="chapter" data-level="5.3" data-path="lab4.html"><a href="lab4.html#guided-exercise-3---mathematical-and-boolean-operations-using-the-raster-calculator"><i class="fa fa-check"></i><b>5.3</b> Guided Exercise 3 - Mathematical and boolean operations using the Raster Calculator</a></li>
<li class="chapter" data-level="5.4" data-path="lab4.html"><a href="lab4.html#guided-exercise-3---masking-and-reprojecting-raster-data."><i class="fa fa-check"></i><b>5.4</b> Guided Exercise 3 - Masking and reprojecting raster data.</a></li>
<li class="chapter" data-level="5.5" data-path="lab4.html"><a href="lab4.html#formative-assessment"><i class="fa fa-check"></i><b>5.5</b> Formative Assessment</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lab5.html"><a href="lab5.html"><i class="fa fa-check"></i><b>6</b> Lab 5 - Working with raster data - continued</a><ul>
<li class="chapter" data-level="6.1" data-path="lab5.html"><a href="lab5.html#guided-exercise-1---converting-rasters-to-vectors"><i class="fa fa-check"></i><b>6.1</b> Guided Exercise 1 - Converting rasters to vectors</a></li>
<li class="chapter" data-level="6.2" data-path="lab5.html"><a href="lab5.html#guided-exercise-2---zonal-statistics-redux"><i class="fa fa-check"></i><b>6.2</b> Guided Exercise 2 - Zonal statistics redux</a></li>
<li class="chapter" data-level="6.3" data-path="lab5.html"><a href="lab5.html#guided-exercise-3---terrain-analysis"><i class="fa fa-check"></i><b>6.3</b> Guided exercise 3 - Terrain Analysis</a></li>
<li class="chapter" data-level="6.4" data-path="lab5.html"><a href="lab5.html#formative-assessment-1"><i class="fa fa-check"></i><b>6.4</b> Formative Assessment</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="lab6.html"><a href="lab6.html"><i class="fa fa-check"></i><b>7</b> Lab 6 - Interpolating data</a><ul>
<li class="chapter" data-level="7.1" data-path="lab6.html"><a href="lab6.html#guided-exercise-1---creating-distance-rasters"><i class="fa fa-check"></i><b>7.1</b> Guided Exercise 1 - Creating distance rasters</a></li>
<li class="chapter" data-level="7.2" data-path="lab6.html"><a href="lab6.html#guided-exercise-2---density-estimation"><i class="fa fa-check"></i><b>7.2</b> Guided exercise 2 - Density Estimation</a></li>
<li class="chapter" data-level="7.3" data-path="lab6.html"><a href="lab6.html#guided-exercise-3---interpolating-values"><i class="fa fa-check"></i><b>7.3</b> Guided exercise 3 - Interpolating values</a></li>
<li class="chapter" data-level="7.4" data-path="lab6.html"><a href="lab6.html#formative-assessment-2"><i class="fa fa-check"></i><b>7.4</b> Formative assessment</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lab8.html"><a href="lab8.html"><i class="fa fa-check"></i><b>8</b> Lab 8 - Practicing GIS</a><ul>
<li class="chapter" data-level="8.1" data-path="lab8.html"><a href="lab8.html#organizing-your-database"><i class="fa fa-check"></i><b>8.1</b> Organizing your database</a></li>
<li class="chapter" data-level="8.2" data-path="lab8.html"><a href="lab8.html#applying-the-criteria"><i class="fa fa-check"></i><b>8.2</b> Applying the criteria</a></li>
<li class="chapter" data-level="8.3" data-path="lab8.html"><a href="lab8.html#reporting-the-results"><i class="fa fa-check"></i><b>8.3</b> Reporting the results</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lab9.html"><a href="lab9.html"><i class="fa fa-check"></i><b>9</b> Lab 9 - Cartography and map making</a><ul>
<li class="chapter" data-level="9.1" data-path="lab9.html"><a href="lab9.html#testing-some-cartogrtaphic-principles"><i class="fa fa-check"></i><b>9.1</b> Testing some cartogrtaphic principles</a></li>
<li class="chapter" data-level="9.2" data-path="lab9.html"><a href="lab9.html#formative-assessment---revisiting-the-flood-mapping"><i class="fa fa-check"></i><b>9.2</b> Formative assessment - revisiting the flood mapping</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown"target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">ENMPG11 Geomatics - Module Workbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lab3" class="section level1">
<h1><span class="header-section-number">4</span> Lab 3 - Working with vector data - Geoprocessing Tools</h1>
<div class="rmdwarning">
<p>
(STILL INCOMPLETE, BEAR WITH ME )
</p>
</div>
<p>During the previous lab, we looked at how to solve probles using vector attributes, making selections based on both attribute values and on spatial relations.</p>
<p>For this exercise, we will learn how to do operations on the vector geometries instead.</p>
<div id="guided-exercise-1---clipping-data" class="section level2">
<h2><span class="header-section-number">4.1</span> Guided Exercise 1 - Clipping data</h2>
<ol style="list-style-type: decimal">
<li><p>Dowload the data for this exercise from the link below, then extract the zipfiles.</p></li>
<li><p>Load all datasets in QGIS and inspect them:</p></li>
</ol>
<div class="rmdnote">
<p>
<strong>Stop and think:</strong>
</p>
<ul>
<li>
<p>
What are the datasets you have?
</p>
</li>
<li>
<p>
What are the file <em>types</em> you have to work with?
</p>
</li>
<li>
<p>
What are the file <em>formats</em> you have to work with?
</p>
</li>
<li>
<p>
What is the <em>Map Projection</em> of each data layer you have?
</p>
</li>
</ul>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Use attribute search to select all the roads from the land cover/land use layer (<code>ITEM2012</code> field). Pay attention to all the possible classes that indicate a road. (</li>
</ol>
<div class="rmdwarning">
<p>
<strong>HINTS:</strong>
</p>
<ol style="list-style-type: decimal">
<li>
<p>
Use the button <code>Values</code> on the right. then the option <code>All unique values</code> to quickly see all possible values of a given attribute.
</p>
</li>
<li>
<p>
Use <code>or</code> if you need features to fulfill <strong>either</strong> criteria. Use <code>and</code> if you need all features to fulfill <strong>all criteria</strong>.
</p>
</li>
<li>
<p>
Computers are dumb so you need to be very explicit. If you are making a compound search, you need to name the attributes and the boolean operation everytime, even if it is the same:
</p>
</li>
</ol>
<ul>
<li>
<p>
<strong>Correct:</strong> ATT_NAME = ‘X’ or ATT_NAME = ‘Y’
</p>
</li>
<li>
<p>
<strong>Wrong:</strong> ATT_NAME = ‘X’ or ‘Y’
</p>
</li>
</ul>
</div>
<ol start="4" style="list-style-type: decimal">
<li>Visualize your layer to see if it look correct. Now, create a buffer of 1km around all roads in the dataset, using <code>Vector &gt; Geoprocessing &gt; Buffer...</code>. Select your new roads layer as the <code>Input layer</code>, define the distance as 1000 meters and leave everything else as default. Click on <code>Run</code> and then <code>Close</code> the window when it’s done.</li>
</ol>
<div class="rmdnote">
<p>
<strong>Stop and think:</strong> Where the results what you expected? What happened?
</p>
</div>
<ol start="5" style="list-style-type: decimal">
<li>Remove the temporary buffer layer you created, and return to <code>Vector &gt; Geoprocessing &gt; Buffer...</code>. Use the same parameters as before, but this time, check the <code>Dissolve result</code> box. <code>Run</code> and <code>Close</code>.</li>
</ol>
<div class="rmdnote">
<p>
<strong>Stop and think:</strong> What did the <code>Dissolve result</code> option do?
</p>
</div>
<ol start="6" style="list-style-type: decimal">
<li><p>Now we want to compute the amount of forest areas that are within 1km of any road. For that, first we need to <code>Clip</code> our land cover dataset using our buffer. Go to <code>Vector &gt; Geoprocessing &gt; Clip</code> and select <code>UK004L1_GLASGOW_UA2012_roads</code> as the <code>Input layer</code>, and your newly created buffer as the <code>Overlay</code> layer. <code>Run</code> and <code>Close</code>.</p></li>
<li><p>Inspect the new layer you have created. Use <em>Symbology</em> to make the land use classes visible. Then save your layer by right-clicking on the <em>Clipped</em> layer name and selecting <code>Make layer permanent</code>. Select the spahefile format and name it as you like. Then add the newly created layer to the project.</p></li>
</ol>
<div class="rmdnote">
<p>
<strong>Stop and think:</strong> Why were the colors not saved with the file?
</p>
</div>
<ol start="8" style="list-style-type: decimal">
<li><p>Right-clik on the <code>Clipped</code> layer you colred by class before, and then select <code>Styles &gt; Copy Styles &gt; All Style categories</code>. Then right click on your new saved layer, and select <code>Styles &gt; Paste Styles &gt; All Style Categories</code>. Now remove the <code>Clipped</code> layer from the project.</p></li>
<li><p>Go to the <em>Symbology window</em> of the new clipped layer, and remove all classes except for <code>Forest</code>, by selecting them and using the <code>-</code> (minus) button at the bottom of the list.</p></li>
</ol>
<div class="rmdnote">
<p>
<strong>Stop and think:</strong> Did we alter the contents of our fule by doing this?
</p>
</div>
<ol start="10" style="list-style-type: decimal">
<li>Open the attribute table for the clipped layer and click on the field calculator.Create a new field called <code>area_m2</code>, of type <code>Decimal number</code>, <code>length</code> = 20 and precision = <code>2</code>. On the middle pane, select <code>Geometry &gt; $area</code>. Double click on it to add it to the Expression pane on the left.</li>
</ol>
<div class="rmdnote">
<p>
<strong>Stop and think:</strong> What is the difference of the <code>$area</code> vs <code>area</code> geometry calculations?
</p>
</div>
<ol start="11" style="list-style-type: decimal">
<li>Click <code>OK</code> to calculate the new field. Now compare the values of the <code>AREA</code>, <code>Shape_Area</code> and <code>area_m2</code> in the attribute table.</li>
</ol>
<div class="rmdnote">
<p>
<strong>Stop and think:</strong> Why is the new area different?
</p>
</div>
<ol start="12" style="list-style-type: decimal">
<li>Load the <code>SSSI_Scotland.shp</code> layer. Then zoom to the entire project using the <code>Zoom full</code> tool (or Ctrl+Shift+F).</li>
</ol>
<div class="rmdnote">
<p>
<strong>Stop and think:</strong> Why are the data not overlapping?
</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lab2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lab4.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
